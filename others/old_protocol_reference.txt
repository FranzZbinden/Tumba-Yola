Protocol messages

| Purpose                                           | Type   | Content                                        | Example message               |
|---------------------------------------------------|--------|------------------------------------------------|-------------------------------|
| Send attack tuple (client -> server)              | attack | r,c                                            | attack|2,3\n                  |
| Welcome/acknowledgement (server -> client)        | ack    | greeting/ok                                    | ack|You are player: 0\n       |
| Error reply (server -> client)                    | error  | text                                           | error|It's not your turn\n    |
| Broadcast/Send updated matrix (server -> client)  | matrix | collapsed matrix string (rows ';', cols ',')   | matrix|0,1,0;1,0,0;0,0,0\n    |
| Attack reply with outcome + updated matrix        | update | hit|r,c|<matrix> or miss|r,c|<matrix>          | update|hit|2,3|...\n          |
| Send initial fleet data (server -> client)        | fleet  | JSON {"ships":[{"cells":[[r,c],...],...}]}     | fleet|{"ships":[...]}\n       |
| Victory notification (server -> client)           | win    | text                                           | win|You won\n                 |
| turn for attack                                   | int    | 0 or 1                                         | turn|0\n                      |


Notes
- Newline terminator (\n) is required on every message.
- Matrix payload uses utilities.matrix_to_string: row values comma-separated, rows separated by semicolons.
- Example literals above include quotes to emphasize exact string/escape content.


 Apply an attack to the given cell without overwriting ships blindly.

     Values:
       0 -> white (empty)   -> set to 2 (blue, miss)
       1 -> black (ship)    -> set to 3 (red, hit)
       2 -> blue (miss)     -> already attacked here, no change
       3 -> red (hit)       -> already attacked here, no change
     Returns the new cell value (2 for miss, 3 for hit).
     Raises ValueError if the cell has already been attacked (2 or 3).